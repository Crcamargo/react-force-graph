{"version":3,"file":"react-kapsule.js","sources":["../index.js"],"sourcesContent":["import React from 'react';\n\nexport default function(kapsuleComponent, wrapperElType = 'div', bindMethodNames = []) {\n  class FromKapsuleComp extends React.PureComponent {\n    state = {\n      comp: kapsuleComponent()\n    };\n\n    // Call a component method\n    _call = (method, ...args) =>\n      this.state.comp[method] instanceof Function\n        ? this.state.comp[method](...args)\n        : undefined; // method not found\n\n    componentDidMount() {\n      Object.keys(this.props).forEach(p => {\n        this._call(p, this.props[p]);\n      });\n      this.state.comp(this.rootElem);\n    }\n\n    componentDidUpdate(prevProps) {\n      Object.keys(this.props).forEach(p => {\n        if (prevProps[p] !== this.props[p]) {\n          this._call(p, this.props[p]);\n        }\n      });\n    }\n\n    componentWillUnmount() {\n      // Invoke _destructor, if it exists\n      if (this.state.comp._destructor instanceof Function) {\n        this.state.comp._destructor();\n      }\n    }\n\n    render() {\n      return React.createElement(\n        wrapperElType,\n        { ref: elem => { this.rootElem = elem } }\n      );\n    }\n  }\n\n  bindMethodNames.forEach(method => {\n    FromKapsuleComp.prototype[method] = function(...args) {\n      return this._call(method, ...args);\n    }\n  });\n\n  return FromKapsuleComp;\n}\n"],"names":["kapsuleComponent","wrapperElType","bindMethodNames","FromKapsuleComp","Object","keys","props","forEach","_call","p","state","comp","rootElem","prevProps","_destructor","Function","React","createElement","ref","elem","PureComponent","method","args","undefined","prototype"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAEe,gBAASA,gBAAT,EAAwE;EAAA,MAA7CC,aAA6C,uEAA7B,KAA6B;EAAA,MAAtBC,eAAsB,uEAAJ,EAAI;;EAAA,MAC/EC,eAD+E;EAAA;;EAAA;EAAA;;EAAA;;EAAA;;EAAA;EAAA;EAAA;;EAAA;EAAA;;EAMnF;;;EANmF;EAAA;EAUlE;;EAVkE,0CAY/D;EAAA;;EAClBC,eAAOC,IAAP,CAAY,KAAKC,KAAjB,EAAwBC,OAAxB,CAAgC,aAAK;EACnC,iBAAKC,KAAL,CAAWC,CAAX,EAAc,OAAKH,KAAL,CAAWG,CAAX,CAAd;EACD,SAFD;EAGA,aAAKC,KAAL,CAAWC,IAAX,CAAgB,KAAKC,QAArB;EACD;EAjBkF;EAAA;EAAA,yCAmBhEC,SAnBgE,EAmBrD;EAAA;;EAC5BT,eAAOC,IAAP,CAAY,KAAKC,KAAjB,EAAwBC,OAAxB,CAAgC,aAAK;EACnC,cAAIM,UAAUJ,CAAV,MAAiB,OAAKH,KAAL,CAAWG,CAAX,CAArB,EAAoC;EAClC,mBAAKD,KAAL,CAAWC,CAAX,EAAc,OAAKH,KAAL,CAAWG,CAAX,CAAd;EACD;EACF,SAJD;EAKD;EAzBkF;EAAA;EAAA,6CA2B5D;EACrB;EACA,YAAI,KAAKC,KAAL,CAAWC,IAAX,CAAgBG,WAAhB,YAAuCC,QAA3C,EAAqD;EACnD,eAAKL,KAAL,CAAWC,IAAX,CAAgBG,WAAhB;EACD;EACF;EAhCkF;EAAA;EAAA,+BAkC1E;EAAA;;EACP,eAAOE,MAAMC,aAAN,CACLhB,aADK,EAEL,EAAEiB,KAAK,mBAAQ;EAAE,mBAAKN,QAAL,GAAgBO,IAAhB;EAAsB,WAAvC,EAFK,CAAP;EAID;EAvCkF;EAAA;EAAA,IACvDH,MAAMI,aADiD;;EAAA;EAAA;;EAAA,SAEnFV,KAFmF,GAE3E;EACNC,YAAMX;EADA,KAF2E;;EAAA,SAOnFQ,KAPmF,GAO3E,UAACa,MAAD;EAAA;;EAAA,yCAAYC,IAAZ;EAAYA,YAAZ;EAAA;;EAAA,aACN,OAAKZ,KAAL,CAAWC,IAAX,CAAgBU,MAAhB,aAAmCN,QAAnC,GACI,sBAAKL,KAAL,CAAWC,IAAX,EAAgBU,MAAhB,qBAA2BC,IAA3B,CADJ,GAEIC,SAHE;EAAA,KAP2E;EAAA;;EA0CrFrB,kBAAgBK,OAAhB,CAAwB,kBAAU;EAChCJ,oBAAgBqB,SAAhB,CAA0BH,MAA1B,IAAoC,YAAkB;EAAA,yCAANC,IAAM;EAANA,YAAM;EAAA;;EACpD,aAAO,KAAKd,KAAL,cAAWa,MAAX,SAAsBC,IAAtB,EAAP;EACD,KAFD;EAGD,GAJD;;EAMA,SAAOnB,eAAP;EACD;;;;;;;;"}